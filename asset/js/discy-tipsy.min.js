!function(a){function b(a,b){return"function"==typeof a?a.call(b):a}function d(a){for(;a=a.parentNode;)if(a==document)return!0;return!1}function c(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()}c.prototype={show:function(){var i=this.getTitle(),d,e,c,g,h,f;if(i&&this.enabled){switch(d=this.tip(),d.find(".tipsy-inner")[this.options.html?"html":"text"](i),d[0].className="tipsy",d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body),c=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),g=d[0].offsetWidth,h=d[0].offsetHeight,f=b(this.options.gravity,this.$element[0]),f.charAt(0)){case"n":e={top:c.top+c.height+this.options.offset,left:c.left+c.width/2-g/2};break;case"s":e={top:c.top-h-this.options.offset,left:c.left+c.width/2-g/2};break;case"e":e={top:c.top+c.height/2-h/2,left:c.left-g-this.options.offset};break;case"w":e={top:c.top+c.height/2-h/2,left:c.left+c.width+this.options.offset}}2==f.length&&("w"==f.charAt(1)?e.left=c.left+c.width/2-15:e.left=c.left+c.width/2-g+15),d.css(e).addClass("tipsy-"+f),d.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+f.charAt(0),this.options.className&&d.addClass(b(this.options.className,this.$element[0])),this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("original-title"))&&a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var c=this.$element,a=this.options,b;return this.fixTitle(),"string"==typeof(a=this.options).title?b=c.attr("title"==a.title?"original-title":a.title):"function"==typeof a.title&&(b=a.title.call(c[0])),(b=(""+b).replace(/(^\s*|\s*$)/,""))||a.fallback},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.tipsy=function(b){var e,f,g,h;function d(d){var e=a.data(d,"tipsy");return e||(e=new c(d,a.fn.tipsy.elementOptions(d,b)),a.data(d,"tipsy",e)),e}return!0===b?this.data("tipsy"):"string"==typeof b?(e=this.data("tipsy"),e&&e[b](),this):((b=a.extend({},a.fn.tipsy.defaults,b)).live||this.each(function(){d(this)}),"manual"!=b.trigger&&(f=b.live?"live":"bind",g="hover"==b.trigger?"mouseenter":"focus",h="hover"==b.trigger?"mouseleave":"blur",this[f](g,function(){var a=d(this);a.hoverState="in",0==b.delayIn?a.show():(a.fixTitle(),setTimeout(function(){"in"==a.hoverState&&a.show()},b.delayIn))})[f](h,function(){var a=d(this);a.hoverState="out",0==b.delayOut?a.hide():setTimeout(function(){"out"==a.hoverState&&a.hide()},b.delayOut)})),this)},a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},a.fn.tipsy.revalidate=function(){a(".tipsy").each(function(){var b=a.data(this,"tipsy-pointee");b&&d(b)||a(this).remove()})},a.fn.tipsy.elementOptions=function(c,b){return a.metadata?a.extend({},b,a(c).metadata()):b},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(b,c){return function(){var d={ns:c[0],ew:c.length>1&&c[1]},f=a(document).scrollTop()+b,g=a(document).scrollLeft()+b,e=a(this);return e.offset().top<f&&(d.ns="n"),e.offset().left<g&&(d.ew="w"),a(window).width()+a(document).scrollLeft()-e.offset().left<b&&(d.ew="e"),a(window).height()+a(document).scrollTop()-e.offset().top<b&&(d.ns="s"),d.ns+(d.ew?d.ew:"")}}}(jQuery)